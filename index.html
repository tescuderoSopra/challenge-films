<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
  <meta name="description" content="Buscador de películas">
  <link rel="preload" as="style" type="text/css" href="/src/styles/style.css"
    onload="this.onload =null; this.rel='stylesheet'" />

  <link rel="preload" href="/src/styles/icons.min.css" as="style" />
  <script>
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', function () {
        navigator.serviceWorker.register('service-worker.js').then(function (registration) {
          // Registration was successful
          console.log('ServiceWorker registration successful with scope: ', registration.scope);
        }, function (err) {
          // registration failed :(
          console.log('ServiceWorker registration failed: ', err);
        });
      });
    }
  </script>
  <base href="/">
  <title>Buscador de películas</title>
</head>

<body>
  <router-nav></router-nav>
  <script>
    window.mode = <%= JSON.stringify(htmlWebpackPlugin.options.mode) %>;
  </script>
  <script type="module" src="./src/components/router-nav.js"></script>
  <script type="module">
    import { findAndModifyFilm } from "./src/libs/functions.js";

    const dispatchChangeFavourite = ({ detail: id }) => {
      // cambiamos si es o no favorito
      console.log('dispaaatch', id);
      findAndModifyFilm(id);
    };

    document.addEventListener('dispatchChangeFavourite', dispatchChangeFavourite);


  </script>
</body>

</html>